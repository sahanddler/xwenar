<!doctype html>
<html lang="ckb" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- FAVICON (ADD HERE) -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <title>خوێنەر</title>
  <link rel="stylesheet" href="style.css" />
    
    <meta name="description" content="کتێبخانەی دیجیتاڵی کوردی بۆ خوێندن و فێربوون. هەزاران کتێب لە یەک شوێن.">
<meta name="keywords" content="کتێب، کوردی، خوێندن، PDF، کتاب، Kurdish books">
<meta name="author" content="Xwenar Library">
<meta name="robots" content="index, follow">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<!-- ================= TOP BAR ================= -->
<div class="topbar">
  <div class="row">
     <span>Xwenar - خوێنەر</span>
  </div>
</div>

<!-- ================= HERO ================= -->
<div class="hero">
  <h1> خوێنەر کتێبخانەیەکی ئەلیکترۆنی📚</h1>
  <p>هەزاران کتێب بە ئاسانی بەدەست بێنە</p>
</div>
    <!-- search -->
<div class="search-home">
  <input id="homeSearch" placeholder=" گەڕان بۆ هەموو کتێبەکان نووسەر یان کتێب..." />
  <div id="searchResults" class="search-results"></div>
</div>
<!-- ================= CATEGORIES ================= -->
<div class="container">
  <div class="section-title">بەشەکان</div>
  <div id="cats" class="cat-grid"></div>
</div>

<!-- ================= FOOTER ================= -->
<footer class="footer-modern">
  <div class="footer-wrap">

    <!-- Brand -->
    <div class="footer-col">
      <div class="footer-brand">
        <div class="logo"></div>
        <span>Xwenar</span>
      </div>
      <p class="footer-desc">
        کتێبخانەیەکی دیجیتاڵی بۆ خوێندن، فێربوون و گەشەپێدان
      </p>
    </div>

    <!-- Links -->
    <div class="footer-col">
      <h4>پەیوەندی</h4>
      <a href="about-us.html">دەربارەی ئێمە</a>
      <a href="contact.html">یارمەتی</a>
      <a href="ku-privacy-policy.html">سیاسەتی تایبەتی</a>
     </div>

    <!-- Stores -->
<footer class="footer-modern">
  <div class="footer-wrap">

    <!-- Brand -->
    <div class="footer-col">
      <div class="footer-brand">
        <div class="logo"></div>
        <span>خوێنەر</span>
      </div>
      <p class="footer-desc">
        کتێبخانەیەکی دیجیتاڵی بۆ خوێندن، فێربوون و گەشەپێدان
      </p>
    </div>

    <!-- Stores -->
    <div class="footer-col">
      <h4>داگرتن</h4>
      <div class="store-btns">

        <a href="https://play.google.com/store/apps/details?id=com.my.xwenar1&hl=en-US"
           class="store google" target="_blank" aria-label="Google Play">
          <i class="fab fa-google-play"></i>
          <span>Play Store</span>
        </a>

        <a href="https://apps.apple.com/us/app/xwenar/id6751713873"
           class="store apple" target="_blank" aria-label="App Store">
          <i class="fab fa-apple"></i>
          <span>App Store</span>
        </a>

      </div>
    </div>

    <!-- Social -->
    <div class="footer-col">
      <h4>شوێنەکانمان</h4>
      <div class="social-links">

        <a href="https://www.facebook.com/Appxwenar"
           target="_blank" aria-label="Facebook">
          <i class="fab fa-facebook-f"></i>
        </a>

        <a href="https://t.me/sahand_dler"
           target="_blank" aria-label="Telegram">
          <i class="fab fa-telegram-plane"></i>
        </a>

      </div>
    </div>

  </div>

  <div class="footer-bottom">
    © 2026 Xwenar Library — All rights reserved
  </div>
</footer>


<script src="app.js"></script>
<script>
const catsEl = document.getElementById("cats");

/* Load first book image for each category */
async function loadCategories(){
  let html = "";

  for(const c of CATEGORIES){
    try{
      const books = await fetchBooks(c.file);
      const img = books[0]?.image || "";

      html += `
        <a class="cat-card" href="category.html?file=${encodeURIComponent(c.file)}&name=${encodeURIComponent(c.name)}">
          <div class="cat-img" style="background-image:url('${img}')"></div>
          <div class="cat-overlay"></div>
          <div class="cat-title">${c.name}</div>
        </a>
      `;
    }catch(e){
      html += `
        <a class="cat-card" href="category.html?file=${encodeURIComponent(c.file)}&name=${encodeURIComponent(c.name)}">
          <div class="cat-img" style="background:#ddd"></div>
          <div class="cat-overlay"></div>
          <div class="cat-title">${c.name}</div>
        </a>
      `;
    }
  }

  catsEl.innerHTML = html;
}

loadCategories();
    const input = document.getElementById("homeSearch");
const resultsEl = document.getElementById("searchResults");

let ALL_BOOKS = [];

/* Load ALL books once */
async function loadAllBooks(){
  for(const c of CATEGORIES){
    const books = await fetchBooks(c.file);
    books.forEach((b,i)=>{
      ALL_BOOKS.push({
        ...b,
        file: c.file,
        id: i,
        cat: c.name
      });
    });
  }
}

function bookText(b){
  return `
    ${b.title||""}
    ${b.author||""}
    ${b.category||""}
    ${b.description||""}
    ${b.aboutpdf||""}
  `.toLowerCase();
}

function renderResults(list){
  if(!list.length){
    resultsEl.style.display = "none";
    return;
  }

  resultsEl.innerHTML = list.slice(0,20).map(b=>`
    <div class="search-item" onclick="openBook('${b.file}',${b.id},'${b.cat}')">
      <img src="${b.image}">
      <div>
        <div class="t">${b.title}</div>
        <div class="a">${b.author}</div>
      </div>
    </div>
  `).join("");

  resultsEl.style.display = "block";
}

window.openBook = function(file,id,name){
  location.href = `book.html?file=${encodeURIComponent(file)}&id=${id}&name=${encodeURIComponent(name)}`;
};

let t;
input.addEventListener("input", ()=>{
  clearTimeout(t);
  t = setTimeout(()=>{
    const q = input.value.trim().toLowerCase();
    if(!q){
      resultsEl.style.display = "none";
      return;
    }

    const res = ALL_BOOKS.filter(b => bookText(b).includes(q));
    renderResults(res);
  }, 200);
});

loadAllBooks();
</script>

</body>
</html>
